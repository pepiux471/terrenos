<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jicuri, Zibatá Queretaro</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="styles1.css">
  <link rel="stylesheet" href="admin.css">
  <style>
    #map { height: 100%; width: 100%; margin-bottom: 20px; }
    .polygon {
      fill-opacity: 0.7;
      stroke: #000000;
      stroke-width: 1;
    }
    .overlay-image {
      display: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-container">
      <div class="logo">
        <i class="fas fa-home"></i>
        <div class="title">
          <h1>Jicuri, Zibatá Queretaro</h1>
          <p>¡Una gran Urbanización!</p>
        </div>
      </div>
      <nav class="nav-links">
        <a href="apartado.html"><i class="fas fa-images"></i> Apartado de Terreno</a>
        <a href="https://hopecontacts.com"><i class="fas fa-envelope"></i> Contacto</a>
      </nav>
    </div>
  </header>

  <main class="main-container">
    <section class="map-section">
      <div class="map-controls">
        <div class="status-select">
          <select id="statusFilter">
            <option value="all">Todos los terrenos</option>
            <option value="available">Disponibles</option>
            <option value="reserved">Apartados</option>
            <option value="sold">Comprados</option>
          </select>
        </div>
        
        <div class="legend">
          <div class="legend-item">
            <div class="legend-color" style="background-color: #4caf50;"></div>
            <span>Disponible</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #ffeb3b;"></div>
            <span>Apartado</span>
          </div>
          <div class="legend-item">
            <div class="legend-color" style="background-color: #ff5722;"></div>
            <span>Comprado</span>
          </div>
        </div>
      </div>
      
      <div class="map-container">
        <div id="map"></div>
      </div>
    </section>
  </main>

  <section class="carousel-section">
    <div class="carousel-container">
      <div class="carousel-slides">
        <div class="carousel-slide active">
          <img src="https://images.unsplash.com/photo-1560520031-3a4dc4e9de0c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Vista aérea del desarrollo">
          <div class="carousel-caption">
            <h3>Vista Aérea Exclusiva</h3>
            <p>Conoce nuestra privilegiada ubicación desde las alturas</p>
          </div>
        </div>
        <div class="carousel-slide">
          <img src="https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Terrenos disponibles">
          <div class="carousel-caption">
            <h3>Terrenos en Venta</h3>
            <p>Descubre los mejores lotes disponibles en nuestra zona dorada</p>
          </div>
        </div>
        <div class="carousel-slide">
          <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Amenidades">
          <div class="carousel-caption">
            <h3>Exclusivas Amenidades</h3>
            <p>Disfruta de áreas verdes y espacios comunes de primer nivel</p>
          </div>
        </div>
        <div class="carousel-slide">
          <img src="https://images.unsplash.com/photo-1479839672679-a46483c0e7c8?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Ubicación estratégica">
          <div class="carousel-caption">
            <h3>Ubicación Privilegada</h3>
            <p>Conectado con las principales vías de comunicación</p>
          </div>
        </div>
        <div class="carousel-slide">
          <img src="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="Diseño urbano">
          <div class="carousel-caption">
            <h3>Diseño Urbano Innovador</h3>
            <p>Calles amplias y distribución inteligente de espacios</p>
          </div>
        </div>
      </div>
      
      <div class="carousel-nav">
        <button class="carousel-btn prev" onclick="plusSlides(-1)">❮</button>
        <button class="carousel-btn next" onclick="plusSlides(1)">❯</button>
      </div>
      
      <div class="carousel-dots">
        <span class="carousel-dot active" onclick="currentSlide(1)"></span>
        <span class="carousel-dot" onclick="currentSlide(2)"></span>
        <span class="carousel-dot" onclick="currentSlide(3)"></span>
        <span class="carousel-dot" onclick="currentSlide(4)"></span>
        <span class="carousel-dot" onclick="currentSlide(5)"></span>
      </div>
    </div>
  </section>

  <section class="contacto-anikwa">
    <div class="container">
      <h2>¿Deseas más información de Jicuri, Zibatá Queretaro?</h2>
      <p class="subtitulo">¡Contáctanos!</p>
      
      <form class="formulario-contacto">
        <div class="fila-formulario">
          <div class="campo">
            <input type="text" placeholder="Nombre(s)" required>
          </div>
          <div class="campo">
            <input type="text" placeholder="Apellidos" required>
          </div>
        </div>
        
        <div class="fila-formulario">
          <div class="campo">
            <input type="tel" placeholder="Teléfono" required>
          </div>
          <div class="campo">
            <input type="email" placeholder="Correo Electrónico" required>
          </div>
        </div>
        
        <div class="fila-formulario">
          <div class="campo ancho-completo">
            <input type="text" placeholder="Horario de Atención" required>
          </div>
        </div>
        
        <div class="fila-formulario">
          <div class="campo ancho-completo">
            <textarea placeholder="Mensaje" rows="4" required></textarea>
          </div>
        </div>
        
        <button type="submit" class="boton-enviar">ENVÍAR MENSAJE</button>
      </form>
    </div>
  </section>

  <footer class="footer">
    <div class="footer-content">
      <p>© 2025 Jicuri, Zibatá Queretaro</p>
      <p>Desarrollado con <i class="fas fa-heart" style="color: #e74c3c;"></i> para nuestros clientes</p>
      <div class="social-links">
        <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
        <a href="#" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
        <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
      </div>
    </div>
  </footer>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar el mapa centrado en México
     const map = L.map('map').setView([23.6345, -102.5528], 5);

      L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles © Esri — Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
      }).addTo(map);

      // GeoJSON base (solo geometrías, sin precios ni status)
        const baseGeojsonData = {
        "type": "FeatureCollection",
        "features": [
          {
            "type": "Feature",
            "properties": { "id": "MX001" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.34028696174242, 20.675923277644554], [-100.34029087217094, 20.67592309791061], [-100.34029474493987, 20.675922560439727], [-100.34029854275228, 20.67592167040803], [-100.34030222903317, 20.67592043638703], [-100.34030576828161, 20.67591887026104], [-100.34030912641266, 20.675916987112696], [-100.3403122710857, 20.675914805077777], [-100.34031517201579, 20.675912345170474], [-100.34031780126539, 20.675909631081055], [-100.34032013351337, 20.675906688947702], [-100.34032214629894, 20.675903547104774], [-100.3403238202379, 20.675900235809948], [-100.34032513920926, 20.67589678695282], [-100.34032609051069, 20.675893233747765], [-100.34032666498064, 20.675889610414107], [-100.34032685708668, 20.67588595184653], [-100.34032666497872, 20.67588229327904], [-100.34032609050695, 20.67587866994564], [-100.34032513920383, 20.675875116741015], [-100.34032382023096, 20.675871667884454], [-100.34032214629079, 20.67586835659032], [-100.34032013350432, 20.675865214748192], [-100.34031780125576, 20.675862272615692], [-100.34031517200599, 20.675859558527172], [-100.34031227107607, 20.675857098620764], [-100.3403091264036, 20.675854916586708], [-100.34030576827345, 20.675853033439154], [-100.34030222902624, 20.675851467313855], [-100.34029854274684, 20.675850233293428], [-100.3402947449361, 20.67584934326216], [-100.34029087216904, 20.67584880579153], [-100.34028696174242, 20.67584862605768], [-100.34028305131584, 20.67584880579153], [-100.34027917854874, 20.67584934326216], [-100.340275380738, 20.675850233293428], [-100.34027169445861, 20.675851467313855], [-100.3402681552114, 20.675853033439154], [-100.34026479708125, 20.675854916586708], [-100.34026165240877, 20.675857098620764], [-100.34025875147888, 20.675859558527172], [-100.34025612222908, 20.675862272615692], [-100.34025378998052, 20.675865214748192], [-100.34025177719406, 20.67586835659032], [-100.34025010325391, 20.675871667884454], [-100.34024878428103, 20.675875116741015], [-100.34024783297791, 20.67587866994564], [-100.34024725850612, 20.67588229327904], [-100.34024706639819, 20.67588595184653], [-100.3402472585042, 20.675889610414107], [-100.34024783297416, 20.675893233747765], [-100.34024878427559, 20.67589678695282], [-100.34025010324697, 20.675900235809948], [-100.34025177718591, 20.675903547104774], [-100.34025378997148, 20.675906688947702], [-100.34025612221947, 20.675909631081055], [-100.34025875146908, 20.675912345170474], [-100.34026165239915, 20.675914805077777], [-100.34026479707221, 20.675916987112696], [-100.34026815520326, 20.67591887026104], [-100.34027169445169, 20.67592043638703], [-100.34027538073256, 20.67592167040803], [-100.340279178545, 20.675922560439727], [-100.34028305131392, 20.67592309791061], [-100.34028696174242, 20.675923277644554]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX002" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.34032870139464, 20.675312542357737], [-100.34033317846978, 20.67531233657834], [-100.3403376124282, 20.675311721221913], [-100.34034196056844, 20.67531070221468], [-100.34034618101546, 20.67530928937025], [-100.34035023312407, 20.675307496295098], [-100.34035407787017, 20.675305340257523], [-100.3403576782268, 20.675302842021374], [-100.34036099952051, 20.675300025646038], [-100.34036400976542, 20.675296918254762], [-100.34036667997124, 20.67529354977345], [-100.34036898442241, 20.675289952642427], [-100.34037090092589, 20.675286161504044], [-100.34037241102466, 20.67528221286906], [-100.3403735001757, 20.67527814476499], [-100.34037415788991, 20.675273996369913], [-100.3403743778332, 20.675269807635143], [-100.3403741578874, 20.675265618900486], [-100.34037350017077, 20.675261470505756], [-100.34037241101751, 20.67525740240224], [-100.34037090091681, 20.675253453768], [-100.34036898441174, 20.675249662630538], [-100.34036667995937, 20.675246065500552], [-100.34036400975282, 20.675242697020362], [-100.34036099950767, 20.675239589630266], [-100.3403576782142, 20.675236773256096], [-100.34035407785831, 20.675234275021072], [-100.34035023311338, 20.675232118984546], [-100.34034618100637, 20.675230325910302], [-100.34034196056129, 20.675228913066622], [-100.34033761242328, 20.675227894059947], [-100.34033317846728, 20.675227278703858], [-100.34032870139464, 20.675227072924578], [-100.34032422432202, 20.675227278703858], [-100.34031979036598, 20.675227894059947], [-100.34031544222798, 20.675228913066622], [-100.3403112217829, 20.675230325910302], [-100.3403071696759, 20.675232118984546], [-100.34030332493096, 20.675234275021072], [-100.34029972457509, 20.675236773256096], [-100.34029640328163, 20.675239589630266], [-100.34029339303648, 20.675242697020362], [-100.34029072282992, 20.675246065500552], [-100.34028841837754, 20.675249662630538], [-100.34028650187248, 20.675253453768], [-100.34028499177177, 20.67525740240224], [-100.3402839026185, 20.675261470505756], [-100.34028324490187, 20.675265618900486], [-100.34028302495608, 20.675269807635143], [-100.34028324489935, 20.675273996369913], [-100.34028390261358, 20.67527814476499], [-100.34028499176462, 20.67528221286906], [-100.3402865018634, 20.675286161504044], [-100.34028841836685, 20.675289952642427], [-100.34029072281805, 20.67529354977345], [-100.34029339302386, 20.675296918254762], [-100.34029640326877, 20.675300025646038], [-100.34029972456247, 20.675302842021374], [-100.34030332491909, 20.675305340257523], [-100.34030716966521, 20.675307496295098], [-100.3403112217738, 20.67530928937025], [-100.34031544222084, 20.67531070221468], [-100.34031979036106, 20.675311721221913], [-100.3403242243195, 20.67531233657834], [-100.34032870139464, 20.675312542357737]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX003" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.34043536939393, 20.674482008562553], [-100.34044011532886, 20.674481790424377], [-100.34044481555783, 20.674481138110647], [-100.34044942481499, 20.674480057903498], [-100.34045389871066, 20.674478560205937], [-100.34045819415871, 20.674476659441606], [-100.34046226979166, 20.674474373915935], [-100.34046608635884, 20.67447172563979], [-100.34046960710468, 20.674468740117543], [-100.3404727981224, 20.674465446101422], [-100.34047562868085, 20.67446187531462], [-100.34047807152015, 20.674458062145792], [-100.34048010311446, 20.674454043317844], [-100.34048170389843, 20.674449857534317], [-100.34048285845569, 20.67444554510659], [-100.34048355566723, 20.674441147565712], [-100.34048378881859, 20.67443670726242], [-100.34048355566442, 20.674432266959258], [-100.34048285845016, 20.674427869418764], [-100.3404817038904, 20.674423556991663], [-100.34048010310424, 20.674419371208973], [-100.34047807150813, 20.674415352382052], [-100.34047562866749, 20.67441153921439], [-100.34047279810825, 20.674407968428856], [-100.34046960709023, 20.674404674414053], [-100.34046608634468, 20.674401688893127], [-100.3404622697783, 20.674399040618255], [-100.34045819414669, 20.674396755093742], [-100.34045389870045, 20.674394854330444], [-100.34044942480698, 20.67439335663372], [-100.34044481555232, 20.6743922764272], [-100.34044011532606, 20.67439162411384], [-100.34043536939393, 20.6743914059758], [-100.34043062346178, 20.67439162411384], [-100.34042592323553, 20.6743922764272], [-100.3404213139809, 20.67439335663372], [-100.34041684008741, 20.674394854330444], [-100.34041254464115, 20.674396755093742], [-100.34040846900955, 20.674399040618255], [-100.34040465244318, 20.674401688893127], [-100.34040113169765, 20.674404674414053], [-100.34039794067961, 20.674407968428856], [-100.34039511012035, 20.67441153921439], [-100.34039266727972, 20.674415352382052], [-100.34039063568362, 20.674419371208973], [-100.34038903489746, 20.674423556991663], [-100.3403878803377, 20.674427869418764], [-100.34038718312345, 20.674432266959258], [-100.34038694996927, 20.67443670726242], [-100.34038718312063, 20.674441147565712], [-100.34038788033217, 20.67444554510659], [-100.34038903488944, 20.674449857534317], [-100.34039063567342, 20.674454043317844], [-100.34039266726771, 20.674458062145792], [-100.340395110107, 20.67446187531462], [-100.34039794066544, 20.674465446101422], [-100.34040113168318, 20.674468740117543], [-100.34040465242902, 20.67447172563979], [-100.34040846899622, 20.674474373915935], [-100.34041254462913, 20.674476659441606], [-100.3404168400772, 20.674478560205937], [-100.34042131397285, 20.674480057903498], [-100.34042592323001, 20.674481138110647], [-100.34043062345899, 20.674481790424377], [-100.34043536939393, 20.674482008562553]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX004" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.34048174678506, 20.67403237709132], [-100.34048666379928, 20.674032151089122], [-100.3404915334599, 20.674031475259085], [-100.3404963088694, 20.67403035610981], [-100.34050094403797, 20.674028804419326], [-100.34050539432633, 20.674026835131276], [-100.34050961687575, 20.674024467211005], [-100.34051357102075, 20.674021723462882], [-100.34051721868077, 20.674018630310737], [-100.3405205247268, 20.674015217543324], [-100.34052345731983, 20.67401151802748], [-100.34052598821742, 20.674007567391595], [-100.34052809304563, 20.674003403682466], [-100.34052975153385, 20.673999066998892], [-100.34053094771, 20.673994599105534], [-100.34053167005425, 20.673990043030656], [-100.34053191161009, 20.673985442651748], [-100.34053167005122, 20.67398084227298], [-100.34053094770407, 20.673976286198506], [-100.34052975152524, 20.673971818305823], [-100.34052809303466, 20.673967481623155], [-100.34052598820452, 20.673963317915124], [-100.34052345730551, 20.67395936728049], [-100.34052052471158, 20.67395566776601], [-100.34051721866525, 20.673952255000014], [-100.34051357100554, 20.673949161849283], [-100.34050961686143, 20.673946418102524], [-100.34050539431342, 20.6739440501835], [-100.340500944027, 20.673942080896555], [-100.34049630886079, 20.673940529206973], [-100.34049153345397, 20.67393941005837], [-100.34048666379624, 20.673938734228738], [-100.34048174678506, 20.67393850822669], [-100.34047682977388, 20.673938734228738], [-100.34047196011618, 20.67393941005837], [-100.34046718470934, 20.673940529206973], [-100.34046254954312, 20.673942080896555], [-100.34045809925671, 20.6739440501835], [-100.34045387670871, 20.673946418102524], [-100.34044992256457, 20.673949161849283], [-100.34044627490488, 20.673952255000014], [-100.34044296885854, 20.67395566776601], [-100.34044003626462, 20.67395936728049], [-100.34043750536561, 20.673963317915124], [-100.34043540053545, 20.673967481623155], [-100.34043374204488, 20.673971818305823], [-100.34043254586608, 20.673976286198506], [-100.34043182351891, 20.67398084227298], [-100.34043158196005, 20.673985442651748], [-100.34043182351587, 20.673990043030656], [-100.34043254586012, 20.673994599105534], [-100.34043374203627, 20.673999066998892], [-100.3404354005245, 20.674003403682466], [-100.34043750535271, 20.674007567391595], [-100.3404400362503, 20.67401151802748], [-100.34044296884333, 20.674015217543324], [-100.34044627488937, 20.674018630310737], [-100.34044992254937, 20.674021723462882], [-100.34045387669438, 20.674024467211005], [-100.3404580992438, 20.674026835131276], [-100.34046254953216, 20.674028804419326], [-100.34046718470073, 20.67403035610981], [-100.34047196011024, 20.674031475259085], [-100.34047682977086, 20.674032151089122], [-100.34048174678506, 20.67403237709132]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX005" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.34044464487245, 20.67358930370425], [-100.34044996557324, 20.673589059146575], [-100.34045523503272, 20.67358832782877], [-100.34046040250308, 20.67358711679384], [-100.34046541821868, 20.67358543770472], [-100.34047023387545, 20.67358330673196], [-100.34047480309587, 20.673580744398034], [-100.3404790818759, 20.673577775379627], [-100.3404830290085, 20.673574428270033], [-100.34048660648062, 20.673570735303763], [-100.34048977983926, 20.673566732046144], [-100.34049251852326, 20.67356245705074], [-100.34049479615763, 20.673557951488124], [-100.34049659080749, 20.673553258749344], [-100.34049788518946, 20.673548424028056], [-100.34049866683799, 20.67354349388528], [-100.3404989282254, 20.67353851580099], [-100.34049866683443, 20.673533537716857], [-100.34049788518251, 20.673528607574564], [-100.34049659079741, 20.673523772854058], [-100.34049479614478, 20.67351908011634], [-100.34049251850816, 20.673514574555007], [-100.34048977982249, 20.67351029956107], [-100.34048660646282, 20.673506296305042], [-100.34048302899035, 20.673502603340438], [-100.34047908185809, 20.673499256232496], [-100.3404748030791, 20.67349628721568], [-100.34047023386033, 20.673493724883222], [-100.34046541820587, 20.673491593911752], [-100.340460402493, 20.67348991482369], [-100.34045523502577, 20.67348870378954], [-100.34044996556969, 20.67348797247222], [-100.34044464487245, 20.673487727914708], [-100.3404393241752, 20.67348797247222], [-100.34043405471911, 20.67348870378954], [-100.34042888725189, 20.67348991482369], [-100.34042387153902, 20.673491593911752], [-100.34041905588455, 20.673493724883222], [-100.34041548666578, 20.67349628721568], [-100.34041020788679, 20.673499256232496], [-100.34040626075453, 20.673502603340438], [-100.34040268328206, 20.673506296305042], [-100.34039950992239, 20.67351029956107], [-100.34039677123671, 20.673514574555007], [-100.3403944936001, 20.67351908011634], [-100.34039269894747, 20.673523772854058], [-100.34039140456237, 20.673528607574564], [-100.34039062291042, 20.673533537716857], [-100.34039036151948, 20.67353851580099], [-100.3403906229069, 20.67354349388528], [-100.34039140455542, 20.673548424028056], [-100.34039269893739, 20.673553258749344], [-100.34039449358725, 20.673557951488124], [-100.34039677122162, 20.67356245705074], [-100.34039950990562, 20.673566732046144], [-100.34040268326424, 20.673570735303763], [-100.34040626073639, 20.673574428270033], [-100.34041020786898, 20.673577775379627], [-100.34041448664901, 20.673580744398034], [-100.34041905586945, 20.67358330673196], [-100.3404238715262, 20.67358543770472], [-100.3404288872418, 20.67358711679384], [-100.34043405471216, 20.67358832782877], [-100.34043932417164, 20.673589059146575], [-100.34044464487245, 20.67358930370425]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX006" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.34122378504293, 20.67597359183537], [-100.34122842084835, 20.67597337876119], [-100.34123301200842, 20.67597274159068], [-100.34123751430768, 20.675971686460137], [-100.34124188438649, 20.675970223531046], [-100.34124608015861, 20.675968366892253], [-100.34125006121637, 20.675966134424193], [-100.34125378922006, 20.675963547626782], [-100.34125722826694, 20.675960631412305], [-100.34126034523707, 20.67595741386552], [-100.34126311011238, 20.675953925973193], [-100.34126549626558, 20.67595020132563], [-100.34126748071672, 20.675946275793248], [-100.34126904435449, 20.675942187181086], [-100.34127017212026, 20.675937974864727], [-100.34127085315305, 20.675933679411088], [-100.34127108089413, 20.67592934218773], [-100.34127085315035, 20.675925004964505], [-100.341270172115, 20.67592070951123], [-100.34126904434684, 20.67591649719547], [-100.34126748070697, 20.675912408584104], [-100.34126549625411, 20.675908483052698], [-100.34126311009963, 20.675904758406258], [-100.34126034522356, 20.675901270515133], [-100.34125722825316, 20.675898052969604], [-100.34125378920655, 20.67589513675639], [-100.34125006120365, 20.67589254996019], [-100.34124608014713, 20.67589031749325], [-100.34124188437676, 20.675888460855425], [-100.34123751430002, 20.67588699792714], [-100.34123301200313, 20.675885942797194], [-100.34122842084568, 20.67588530562705], [-100.34122378504293, 20.675885092552992], [-100.3412191492402, 20.67588530562705], [-100.34121455808273, 20.675885942797194], [-100.34121005578587, 20.67588699792714], [-100.34120568570913, 20.675888460855425], [-100.34120148993873, 20.67589031749325], [-100.34119750888223, 20.67589254996019], [-100.34119378087931, 20.67589513675639], [-100.34119034183271, 20.675898052969604], [-100.3411872248623, 20.675901270515133], [-100.34118445998622, 20.675904758406258], [-100.34118207383176, 20.675908483052698], [-100.3411800893789, 20.675912408584104], [-100.34117852573904, 20.67591649719547], [-100.34117739797088, 20.67592070951123], [-100.34117671693551, 20.675925004964505], [-100.34117648919172, 20.67592934218773], [-100.34117671693282, 20.675933679411088], [-100.3411773979656, 20.675937974864727], [-100.34117852573137, 20.675942187181086], [-100.34118008936916, 20.675946275793248], [-100.3411820738203, 20.67595020132563], [-100.34118445997349, 20.675953925973193], [-100.34118722484878, 20.67595741386552], [-100.34119034181892, 20.675960631412305], [-100.3411937808658, 20.675963547626782], [-100.3411975088695, 20.675966134424193], [-100.34120148992727, 20.675968366892253], [-100.34120568569938, 20.675970223531046], [-100.34121005577819, 20.675971686460137], [-100.34121455807744, 20.67597274159068], [-100.3412191492375, 20.67597337876119], [-100.34122378504293, 20.67597359183537]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX007" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.34111711704328, 20.6753905055295], [-100.34112203405749, 20.675390279529328], [-100.34112690371813, 20.67538960370533], [-100.34113167912766, 20.675388484566064], [-100.34113631429621, 20.67538693288946], [-100.34114076458458, 20.675384963619024], [-100.341144987134, 20.67538259571993], [-100.34114894127902, 20.675379851996347], [-100.34115258893901, 20.67537675887187], [-100.34115589498506, 20.675373346134975], [-100.3411588275781, 20.67536964665223], [-100.34116135847569, 20.675365696051674], [-100.34116346330391, 20.67536153237978], [-100.34116512179213, 20.675357195735], [-100.34116631796826, 20.675352727881602], [-100.34116704031253, 20.675348171847467], [-100.34116728186835, 20.675343571509707], [-100.3411670403095, 20.675338971172085], [-100.34116631796235, 20.675334415138362], [-100.34116512178352, 20.675329947285636], [-100.34116346329294, 20.675325610641757], [-100.34116135846278, 20.675321446970962], [-100.34115882756376, 20.675317496371665], [-100.34115589496984, 20.675313796890276], [-100.34115258892352, 20.675310384154802], [-100.3411489412638, 20.675307291031732], [-100.34114498711966, 20.675304547309516], [-100.34114076457168, 20.675302179411673], [-100.34113631428525, 20.67530021014234], [-100.34113167911904, 20.675298658466637], [-100.3411269037122, 20.675297539328035], [-100.34112203405446, 20.675296863504453], [-100.34111711704328, 20.675296637504424], [-100.3411122000321, 20.675296863504453], [-100.34110733037438, 20.675297539328035], [-100.34110255496755, 20.675298658466637], [-100.34109791980133, 20.67530021014234], [-100.3410934695149, 20.675302179411673], [-100.3410892469669, 20.675304547309516], [-100.34108529282278, 20.675307291031732], [-100.34108164516304, 20.675310384154802], [-100.34107833911673, 20.675313796890276], [-100.3410754065228, 20.675317496371665], [-100.3410728756238, 20.675321446970962], [-100.34107077079364, 20.675325610641757], [-100.34106911230305, 20.675329947285636], [-100.34106791612423, 20.675334415138362], [-100.34106719377706, 20.675338971172085], [-100.34106695221823, 20.675343571509707], [-100.34106719377405, 20.675348171847467], [-100.3410679161183, 20.675352727881602], [-100.34106911229443, 20.675357195735], [-100.34107077078266, 20.67536153237978], [-100.34107287561089, 20.675365696051674], [-100.34107540650848, 20.67536964665223], [-100.34107833910153, 20.675373346134975], [-100.34108164514757, 20.67537675887187], [-100.34108529280756, 20.675379851996347], [-100.34108924695258, 20.67538259571993], [-100.341093469502, 20.675384963619024], [-100.34109791979036, 20.67538693288946], [-100.34110255495894, 20.675388484566064], [-100.34110733036844, 20.67538960370533], [-100.34111220002909, 20.675390279529328], [-100.34111711704328, 20.6753905055295]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX008" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.34117740765181, 20.67467621559868], [-100.34118204345724, 20.674676002522684], [-100.34118663461729, 20.674675365346726], [-100.34119113691654, 20.674674310207163], [-100.34119550699535, 20.674672847265587], [-100.34119970276745, 20.67467099061092], [-100.34120368382523, 20.674668758123786], [-100.34120741182893, 20.674666171304274], [-100.3412108508758, 20.674663255064882], [-100.34121396784595, 20.674660037490604], [-100.34121673272122, 20.67465654956847], [-100.34121911887442, 20.674652824889083], [-100.34122110332555, 20.674648899323163], [-100.34122266696335, 20.674644810676067], [-100.34122379472912, 20.67464059832372], [-100.34122447576189, 20.674636302833367], [-100.341224703503, 20.674631965572964], [-100.34122447575919, 20.674627628312678], [-100.34122379472383, 20.674623332822698], [-100.34122266695569, 20.67461912047094], [-100.34122110331582, 20.674615031824647], [-100.34121911886295, 20.674611106259704], [-100.34121673270849, 20.67460738158143], [-100.34121396783242, 20.6746038936605], [-100.34121085086201, 20.674600676087486], [-100.3412074118154, 20.67459775984935], [-100.3412036838125, 20.674595173031047], [-100.34119970275599, 20.67459294054503], [-100.3411955069856, 20.674591083891343], [-100.34119113690889, 20.674589620950563], [-100.341186634612, 20.6745885658116], [-100.34118204345457, 20.674587928636008], [-100.34117740765181, 20.674587715560133], [-100.34117277184906, 20.674587928636008], [-100.34116818069161, 20.6745885658116], [-100.34116367839475, 20.674589620950563], [-100.34115930831801, 20.674591083891343], [-100.34115511254763, 20.67459294054503], [-100.34115113149112, 20.674595173031047], [-100.34114740348821, 20.67459775984935], [-100.34114396444163, 20.674600676087486], [-100.3411408474712, 20.6746038936605], [-100.34113808259514, 20.67460738158143], [-100.34113569644066, 20.674611106259704], [-100.34113371198781, 20.674615031824647], [-100.34113214834792, 20.67461912047094], [-100.3411310205798, 20.674623332822698], [-100.34113033954442, 20.674627628312678], [-100.34113011180062, 20.674631965572964], [-100.34113033954173, 20.674636302833367], [-100.34113102057451, 20.67464059832372], [-100.34113214834026, 20.674644810676067], [-100.34113371197806, 20.674648899323163], [-100.3411356964292, 20.674652824889083], [-100.3411380825824, 20.67465654956847], [-100.34114084745768, 20.674660037490604], [-100.34114396442781, 20.674663255064882], [-100.3411474034747, 20.674666171304274], [-100.34115113147838, 20.674668758123786], [-100.34115511253617, 20.67467099061092], [-100.34115930830828, 20.674672847265587], [-100.34116367838709, 20.674674310207163], [-100.34116818068635, 20.674675365346726], [-100.34117277184639, 20.674676002522684], [-100.34117740765181, 20.67467621559868]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX009" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.3411634944344, 20.674202593806935], [-100.34116851541411, 20.674202363026403], [-100.34117348803899, 20.674201672907362], [-100.34117836441992, 20.67420053009603], [-100.3411830975946, 20.67419894559832], [-100.34118764198001, 20.67419693467383], [-100.34119195381113, 20.674194516688868], [-100.34119599156269, 20.67419171492998], [-100.34119971634891, 20.674188556379647], [-100.34120309229806, 20.674185071456467], [-100.34120608689791, 20.674181293722167], [-100.34120867130883, 20.674177259558423], [-100.34121082064158, 20.674173007816446], [-100.3412125141969, 20.674168579442856], [-100.34121373566497, 20.674164017085324], [-100.34121447328246, 20.674159364681866], [-100.34121471994571, 20.67415466703767], [-100.3412144732793, 20.67414996939361], [-100.3412137356588, 20.67414531699058], [-100.3412125141879, 20.67414075463375], [-100.34121082063014, 20.674136326261102], [-100.34120867129539, 20.67413207452027], [-100.34120608688296, 20.674128040357836], [-100.3412030922822, 20.674124262624954], [-100.34119971633275, 20.674120777703244], [-100.34119599154683, 20.674117619154394], [-100.3411919537962, 20.674114817396923], [-100.34118764196656, 20.67411239941327], [-100.34118309758318, 20.67411038848993], [-100.34117836441092, 20.674108803993157], [-100.3411734880328, 20.674107661182525], [-100.34116851541094, 20.67410697106391], [-100.3411634944344, 20.674106740283527], [-100.34115847345784, 20.67410697106391], [-100.34115350083599, 20.674107661182525], [-100.34114862445787, 20.674108803993157], [-100.34114389128563, 20.67411038848993], [-100.34113934690224, 20.67411239941327], [-100.34113503507261, 20.674114817396923], [-100.34113099732198, 20.674117619154394], [-100.34112727253606, 20.674120777703244], [-100.34112389658658, 20.674124262624954], [-100.34112090198582, 20.674128040357836], [-100.3411183175734, 20.67413207452027], [-100.34111616823866, 20.674136326261102], [-100.3411144746809, 20.67414075463375], [-100.34111325321001, 20.67414531699058], [-100.34111251558949, 20.67414996939361], [-100.34111226892307, 20.67415466703767], [-100.34111251558635, 20.674159364681866], [-100.34111325320382, 20.674164017085324], [-100.3411144746719, 20.674168579442856], [-100.34111616822723, 20.674173007816446], [-100.34111831755996, 20.674177259558423], [-100.3411209019709, 20.674181293722167], [-100.34112389657074, 20.674185071456467], [-100.34112727251987, 20.674188556379647], [-100.34113099730611, 20.67419171492998], [-100.34113503505766, 20.674194516688868], [-100.3411393468888, 20.67419693467383], [-100.34114389127419, 20.67419894559832], [-100.34114862444889, 20.67420053009603], [-100.34115350082982, 20.674201672907362], [-100.3411584734547, 20.674202363026403], [-100.3411634944344, 20.674202593806935]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX010" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.34120523408662, 20.67376414896107], [-100.34121023444614, 20.673763919127644], [-100.3412151866494, 20.67376323184081], [-100.34122004300396, 20.673762093719493], [-100.34122475674042, 20.67376051572446], [-100.3412292824629, 20.673758513052665], [-100.34123357658616, 20.673756104990957], [-100.34123759775548, 20.673753314730295], [-100.3412413072447, 20.673750169142448], [-100.3412446693295, 20.673746698521157], [-100.34124765163111, 20.67374293629042], [-100.34125022542835, 20.673738918682613], [-100.3412523659342, 20.673734684389494], [-100.34125405253441, 20.673730274189655], [-100.34125526898619, 20.673725730555734], [-100.34125600357441, 20.673721097245423], [-100.34125624922468, 20.673716418880034], [-100.34125600357129, 20.673711740514786], [-100.34125526898005, 20.6737071072049], [-100.34125405252551, 20.67370256357167], [-100.34125236592287, 20.673698153372765], [-100.34125022541502, 20.673693919080783], [-100.34124765161627, 20.673689901474276], [-100.34124466931377, 20.673686139244953], [-100.34124130722867, 20.673682668625123], [-100.34123759773973, 20.673679523038732], [-100.34123357657136, 20.673676732779484], [-100.34122928244958, 20.67367432471907], [-100.34122475672909, 20.673672322048414], [-100.34122004299506, 20.673670744054313], [-100.34121518664327, 20.673669605933696], [-100.34121023444301, 20.673668918647277], [-100.34120523408662, 20.673668688814004], [-100.34120023373025, 20.673668918647277], [-100.34119528152996, 20.673669605933696], [-100.3411904251782, 20.673670744054313], [-100.34118571144415, 20.673672322048414], [-100.34118118572367, 20.67367432471907], [-100.34117689160189, 20.673676732779484], [-100.34117287043351, 20.673679523038732], [-100.34116916094456, 20.673682668625123], [-100.34116579885949, 20.673686139244953], [-100.34116281655697, 20.673689901474276], [-100.34116024275822, 20.673693919080783], [-100.34115810225039, 20.673698153372765], [-100.34115641564773, 20.67370256357167], [-100.3411551991932, 20.6737071072049], [-100.34115446460196, 20.673711740514786], [-100.34115421894856, 20.673716418880034], [-100.34115446459883, 20.673721097245423], [-100.34115519918706, 20.673725730555734], [-100.34115641563884, 20.673730274189655], [-100.34115810223905, 20.673734684389494], [-100.34116024274489, 20.673738918682613], [-100.34116281654215, 20.67374293629042], [-100.34116579884376, 20.673746698521157], [-100.34116916092853, 20.673750169142448], [-100.34117287041778, 20.673753314730295], [-100.34117689158707, 20.673756104990957], [-100.34118118571034, 20.673758513052665], [-100.34118571143283, 20.67376051572446], [-100.34119042516929, 20.673762093719493], [-100.34119528152384, 20.67376323184081], [-100.34120023372712, 20.673763919127644], [-100.34120523408662, 20.67376414896107]
              ]]
            }
          },
          {
            "type": "Feature",
            "properties": { "id": "MX011" },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[
                [-100.33994840678754, 20.674723266536855], [-100.33995388063339, 20.674723014941982], [-100.33995930176306, 20.674722262580364], [-100.33996461796805, 20.674721016697664], [-100.33996977805036, 20.674719289292415], [-100.33997473231553, 20.6747170970005], [-100.33997943305124, 20.674714460934908], [-100.3399838349868, 20.674711406482405], [-100.3399878957292, 20.67470796305907], [-100.3399915761712, 20.67470416382698], [-100.33999484086816, 20.674700045374834], [-100.33999765837932, 20.67469564736561], [-100.34000000157044, 20.674691012154558], [-100.34000184787544, 20.67468618438132], [-100.34000317951339, 20.674681210539998], [-100.34000398365994, 20.67467613853142], [-100.34000425257078, 20.67467101720181], [-100.34000398365622, 20.674665895872373], [-100.34000317950606, 20.6746608238643], [-100.34000184786477, 20.67465585002381], [-100.34000000155686, 20.67465102225169], [-100.33999765836332, 20.674646387042007], [-100.33999484085041, 20.674641989034328], [-100.33999157615233, 20.674637870583872], [-100.33998789570995, 20.674634071353534], [-100.33998383496797, 20.674630627931954], [-100.33997943303348, 20.674627573481143], [-100.33997473229954, 20.6746249374171], [-100.33996977803676, 20.674622745126545], [-100.33996461795736, 20.674621017722423], [-100.3399593017557, 20.674619771840547], [-100.33995388062964, 20.67461901947944], [-100.33994840678754, 20.674618767884738], [-100.33994293294545, 20.67461901947944], [-100.33993751181939, 20.674619771840547], [-100.3399321956177, 20.674621017722423], [-100.33992703553832, 20.674622745126545], [-100.33992208127555, 20.6746249374171], [-100.33991738054162, 20.674627573481143], [-100.33991297860713, 20.674630627931954], [-100.33990891786512, 20.674634071353534], [-100.33990523742274, 20.674637870583872], [-100.33990197272468, 20.674641989034328], [-100.33989915521175, 20.674646387042007], [-100.33989681201821, 20.67465102225169], [-100.33989496571031, 20.67465585002381], [-100.33989363406904, 20.6746608238643], [-100.33989282991888, 20.674665895872373], [-100.33989256100429, 20.67467101720181], [-100.33989282991513, 20.67467613853142], [-100.33989363406168, 20.674681210539998], [-100.33989496569964, 20.67468618438132], [-100.33989681200462, 20.674691012154558], [-100.33989915519578, 20.67469564736561], [-100.33990197270693, 20.674700045374834], [-100.33990523740388, 20.67470416382698], [-100.3399089178459, 20.67470796305907], [-100.33991297858827, 20.674711406482405], [-100.33991738052384, 20.674714460934908], [-100.33992208125957, 20.6747170970005], [-100.33992703552474, 20.674719289292415], [-100.33993219560703, 20.674721016697664], [-100.33993751181202, 20.674722262580364], [-100.33994293294168, 20.674723014941982], [-100.33994840678754, 20.674723266536855]
              ]]
            }
          }

        ]
      };

      // Variable global para datos completos
      let geojsonData = null;
      let geojsonLayer = null;

      // Función para cargar todos los terrenos desde la BD
      async function loadAllTerrainsFromDB() {
        try {
          const response = await fetch('/api/terrains');
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const terrainsFromDB = await response.json();
          console.log('Terrenos recibidos de la BD:', terrainsFromDB);

          // Crear una copia de baseGeojsonData y llenar con datos de BD
          geojsonData = JSON.parse(JSON.stringify(baseGeojsonData));
          geojsonData.features.forEach(feature => {
            const terrainFromDB = terrainsFromDB.find(t => t.id === feature.properties.id);
            if (terrainFromDB) {
              feature.properties.size_m2 = terrainFromDB.size_m2;
              feature.properties.price = terrainFromDB.price;
              feature.properties.status = terrainFromDB.status;
              feature.properties.image_url = terrainFromDB.image_url || 'https://example.com/default.jpg';
              console.log(`Terreno ${feature.properties.id}: status = ${terrainFromDB.status}`);
            } else {
              console.log(`Terreno ${feature.properties.id} no encontrado en BD, usando defaults`);
              feature.properties.size_m2 = 0;
              feature.properties.price = 0;
              feature.properties.status = 'unavailable';
              feature.properties.image_url = 'https://example.com/default.jpg';
            }
          });
          return geojsonData;
        } catch (error) {
          console.error('Error al cargar terrenos desde BD:', error);
          geojsonData = JSON.parse(JSON.stringify(baseGeojsonData));
          for (const feature of geojsonData.features) {
            try {
              const individualResponse = await fetch(`/api/terrain/${feature.properties.id}`);
              if (individualResponse.ok) {
                const terrain = await individualResponse.json();
                feature.properties.size_m2 = terrain.size_m2;
                feature.properties.price = terrain.price;
                feature.properties.status = terrain.status;
                feature.properties.image_url = terrain.image_url || 'https://example.com/default.jpg';
              } else {
                feature.properties.size_m2 = 0;
                feature.properties.price = 0;
                feature.properties.status = 'unavailable';
                feature.properties.image_url = 'https://example.com/default.jpg';
              }
            } catch (individualError) {
              console.error(`Error al cargar terreno ${feature.properties.id}:`, individualError);
              feature.properties.size_m2 = 0;
              feature.properties.price = 0;
              feature.properties.status = 'unavailable';
              feature.properties.image_url = 'https://example.com/default.jpg';
            }
          }
          return geojsonData;
        }
      }

      // Función para crear popup con información del terreno
      function createPopupContent(feature) {
        return `
          <div class="popup-content">
            <h3>Terreno ${feature.properties.id}</h3>
            <p><strong>Tamaño:</strong> ${feature.properties.size_m2} m²</p>
            <p><strong>Precio:</strong> $${feature.properties.price.toLocaleString()}</p>
            <p><strong>Estado:</strong> ${feature.properties.status === 'available' ? 'Disponible' : 
                                          feature.properties.status === 'reserved' ? 'Apartado' : 
                                          feature.properties.status === 'sold' ? 'Comprado' : 'No disponible'}</p>
            <p><strong>Descripción:</strong> ${feature.properties.description || 'Terreno ideal para tu inversión'}</p>
            ${feature.properties.image_url ? `<img src="${feature.properties.image_url}" alt="Terreno ${feature.properties.id}" style="max-width:100%; margin-top:10px;">` : ''}
          </div>
        `;
      }

      // Función para crear y actualizar el layer del mapa
      function createMapLayer() {
        if (!geojsonData) return;

        // Limpiar layer existente si existe
        if (geojsonLayer) {
          map.removeLayer(geojsonLayer);
        }

        geojsonLayer = L.geoJSON(geojsonData, {
          style: function (feature) {
            return {
              fillColor: feature.properties.status === 'available' ? '#4caf50' :
                         feature.properties.status === 'reserved' ? '#ffeb3b' :
                         feature.properties.status === 'sold' ? '#ff5722' :
                         '#808080',
              fillOpacity: 1,
              color: '#000000',
              weight: 1
            };
          },
          onEachFeature: function (feature, layer) {
            // Popup con información del terreno
            layer.bindPopup(createPopupContent(feature), {
              maxWidth: 300
            });

            // Redirigir al hacer clic si está disponible
            layer.on('click', function () {
              if (feature.properties.status === 'available') {
                window.location.href = `apartado.html?id=${feature.properties.id}&size=${feature.properties.size_m2}&price=${feature.properties.price}`;
              } else {
                const statusText = feature.properties.status === 'reserved' ? 'apartado' : 
                                   feature.properties.status === 'sold' ? 'comprado' : 'no disponible';
                alert(`Este terreno ya está ${statusText} y no se puede seleccionar.`);
              }
            });

            // Efectos hover
            layer.on('mouseover', function () {
              this.setStyle({ 
                fillOpacity: 0.9,
                weight: 2
              });
            });

            layer.on('mouseout', function () {
              this.setStyle({ 
                fillOpacity: 0.7,
                weight: 1
              });
            });

            // Cambiar cursor según estado
            layer.setStyle({ 
              cursor: feature.properties.status === 'available' ? 'pointer' : 'not-allowed'
            });
          }
        }).addTo(map);
      }

      // Función de inicialización
      async function initializeData() {
        try {
          // Cargar datos de BD
          await loadAllTerrainsFromDB();
          
          // Crear el mapa con datos actualizados
          createMapLayer();

        // Animación de zoom desde México hasta los terrenos
        setTimeout(() => {
          map.flyTo([20.675, -100.34], 18, {
            duration: 3,
            easeLinearity: 0.25
          });
        }, 2000);
          // Ajustar el mapa al cambiar el tamaño de la ventana
          window.addEventListener('resize', function() {
            setTimeout(() => {
              map.invalidateSize();
            }, 200);
          });

          // Filtrar terrenos por estado
          document.getElementById('statusFilter').addEventListener('change', function (e) {
            const filterValue = e.target.value;
            geojsonLayer.eachLayer(function(layer) {
              if (filterValue === 'all' || layer.feature.properties.status === filterValue) {
                map.addLayer(layer);
              } else {
                map.removeLayer(layer);
              }
            });
          });
        } catch (error) {
          console.error('Error en inicialización:', error);
          alert('Error al cargar los datos. Por favor, recarga la página.');
        }
      }

      // Inicializar la aplicación
      initializeData();

      // Carrusel
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) { showSlides(slideIndex += n); }
      function currentSlide(n) { showSlides(slideIndex = n); }

      function showSlides(n) {
        let i;
        const slides = document.getElementsByClassName("carousel-slide");
        const dots = document.getElementsByClassName("carousel-dot");
        if (n > slides.length) slideIndex = 1;
        if (n < 1) slideIndex = slides.length;
        document.querySelector('.carousel-slides').style.transform = `translateX(-${(slideIndex-1)*100}%)`;
        for (i = 0; i < dots.length; i++) dots[i].className = dots[i].className.replace(" active", "");
        dots[slideIndex-1].className += " active";
      }

      setInterval(() => plusSlides(1), 5000);

      // Añadir imagen como overlay al hacer zoom
      const overlayImage = L.imageOverlay('./image.png', [
        [18.67, -95.23], // Esquina superior izquierda (ajusta según tu imagen)
        [18.66, -95.21]  // Esquina inferior derecha (ajusta según tu imagen)
      ], {
        opacity: 0.7,
        interactive: true
      });

      // Mostrar/ocultar imagen según el nivel de zoom
      map.on('zoomend', function() {
        if (map.getZoom() >= 14) {
          overlayImage.addTo(map);
        } else {
          map.removeLayer(overlayImage);
        }
      });

      // Mantener polígonos encima de la imagen
      map.on('zoomend', function() {
        if (geojsonLayer) geojsonLayer.bringToFront();
      });
    });
  </script>
</body>
</html>